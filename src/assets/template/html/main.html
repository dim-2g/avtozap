<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Главная страница</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <!-- @if NODE_ENV='development' -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,500,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&amp;subset=cyrillic,cyrillic-ext" rel="stylesheet">
    <link rel="stylesheet" href="/assets/template/vendor/slick/slick.css">
    <link rel="stylesheet" href="/assets/template/vendor/slick/slick-theme.css">
    <link rel="stylesheet" href="/assets/template/vendor/magnific-popup/magnific-popup.css">
    <link rel="stylesheet" href="/assets/template/vendor/photobox/photobox.css">
    <!--[if lt IE 9]><link rel="stylesheet" href="/assets/template/vendor/photobox/photobox.ie.css"><![endif]-->

    <link rel="stylesheet" href="/assets/template/css/main.css">
    <!-- @endif -->

    <!-- @if NODE_ENV='production' -->
    <link rel="stylesheet" href="assets/template/css/main.min.css">
    <!-- @endif -->
</head>
<body class="main">

<div class="logo-box">
    <a href="/"><img itemprop="image url" src="/assets/template/img/logo.png" alt=""></a>
</div>

<div class="search">
    <form action="">
        <input type="text" class="search__input" placeholder=" Поиск по артикулу или номеру детали"/>
        <button type="submit" class="search__submit"></button>
    </form>
</div>



<div class="main-navigation">
    <h2>Восемь изображений с разрывом 20 пикселей</h2>
    <div class="carousel" data-gap="20">

        <figure style="transform-origin: 50% 50% -600.159px; transform: rotateY(0rad);">
            <div slide-index="1" style="">
                <div class="main-navigation__item">
                    <a href="#"><img src="/assets/template/img/brand-hino.png" alt="" ></a>
                </div>
            </div>
            <div slide-index="2" style="transform-origin: 50% 50% -1403.25px; transform: rotateY(0.523599rad);">
                <div class="main-navigation__item">
                    <a href="#"><img src="/assets/template/img/brand-isuzu.png" alt=""></a>
                </div>
            </div>
            <div slide-index="3" style="transform-origin: 50% 50% -1403.25px; transform: rotateY(1.0472rad);">
                <div class="main-navigation__item">
                    <a href="#"><img src="/assets/template/img/brand-mitsubishi.png" alt="" ></a>
                </div>
            </div>
            <div slide-index="4" style="transform-origin: 50% 50% -1403.25px; transform: rotateY(1.5708rad);">
                <div class="main-navigation__item">
                    <a href="#"><img src="/assets/template/img/brand-hino.png" alt=""></a>
                </div>
            </div>
            <div slide-index="5" style="transform-origin: 50% 50% -1403.25px; transform: rotateY(2.0944rad);">
                <div class="main-navigation__item">
                    <a href="#"><img src="/assets/template/img/brand-isuzu.png" alt="" ></a>
                </div>
            </div>
            <div slide-index="6" style="transform-origin: 50% 50% -1403.25px; transform: rotateY(2.61799rad);">
                <div class="main-navigation__item">
                    <a href="#"><img src="/assets/template/img/brand-mitsubishi.png" alt="" ></a>
                </div>
            </div>
            <div slide-index="7" style="transform-origin: 50% 50% -1403.25px; transform: rotateY(3.14159rad);">
                <div class="main-navigation__item">
                    <a href="#"><img src="/assets/template/img/brand-hino.png" alt="" ></a>
                </div>
            </div>
            <div slide-index="8" style="transform-origin: 50% 50% -1403.25px; transform: rotateY(3.66519rad);">
                <div class="main-navigation__item">
                    <a href="#"><img src="/assets/template/img/brand-isuzu.png" alt="" ></a>
                </div>
            </div>
            <div slide-index="9" style=" transform-origin: 50% 50% -1403.25px; transform: rotateY(4.18879rad);">
                <div class="main-navigation__item">
                    <a href="#"><img src="/assets/template/img/brand-mitsubishi.png" alt="" ></a>
                </div>
            </div>
            <div slide-index="10" style=" transform-origin: 50% 50% -1403.25px; transform: rotateY(4.71239rad);">
                <div class="main-navigation__item">
                    <a href="#"><img src="/assets/template/img/brand-hino.png" alt="" ></a>
                </div>
            </div>
            <div slide-index="11" style=" transform-origin: 50% 50% -1403.25px; transform: rotateY(5.23599rad);">
                <div class="main-navigation__item">
                    <a href="#"><img src="/assets/template/img/brand-isuzu.png" alt="" ></a>
                </div>
            </div>
            <div slide-index="12" style=" transform-origin: 50% 50% -1403.25px; transform: rotateY(5.75959rad);">
                <div class="main-navigation__item">
                    <a href="#"><img src="/assets/template/img/brand-mitsubishi.png" alt="" ></a>
                </div>
            </div>
        </figure>


    </div>

    <button class="main-nav prev">
        <svg class="arrow-live">
            <polygon class="arrow-top" points="37.6,27.9 1.8,1.3 3.3,0 37.6,25.3 71.9,0 73.7,1.3 "/>
            <polygon class="arrow-middle" points="37.6,45.8 0.8,18.7 4.4,16.4 37.6,41.2 71.2,16.4 74.5,18.7 "/>
            <polygon class="arrow-bottom" points="37.6,64 0,36.1 5.1,32.8 37.6,56.8 70.4,32.8 75.5,36.1 "/>
        </svg>
    </button>

    <button class="main-nav next">
        <svg class="arrow-live">
            <polygon class="arrow-top" points="37.6,27.9 1.8,1.3 3.3,0 37.6,25.3 71.9,0 73.7,1.3 "/>
            <polygon class="arrow-middle" points="37.6,45.8 0.8,18.7 4.4,16.4 37.6,41.2 71.2,16.4 74.5,18.7 "/>
            <polygon class="arrow-bottom" points="37.6,64 0,36.1 5.1,32.8 37.6,56.8 70.4,32.8 75.5,36.1 "/>
        </svg>
    </button>



</div>


<!--div slide-index="1">
    <img  src="https://source.unsplash.com/mCg0ZgD7BgU/800x533" alt="" style="">
</div>
<div slide-index="2">
    <img src="https://source.unsplash.com/EbuaKnSm8Zw/800x533" alt="" style=" transform-origin: 50% 50% -600.159px; transform: rotateY(0.785398rad);">
</div>
<div slide-index="3">
    <img src="https://source.unsplash.com/kG38b7CFzTY/800x533" alt="" style=" transform-origin: 50% 50% -600.159px; transform: rotateY(1.5708rad);">
</div>
<div slide-index="4">
    <img src="https://source.unsplash.com/nvzvOPQW0gc/800x533" alt="" style=" transform-origin: 50% 50% -600.159px; transform: rotateY(2.35619rad);">
</div>
<div slide-index="5">
    <img src="https://source.unsplash.com/VkwRmha1_tI/800x533" alt="" style=" transform-origin: 50% 50% -600.159px; transform: rotateY(3.14159rad);">
</div>
<div slide-index="6">
    <img src="https://source.unsplash.com/1FWICvPQdkY/800x533" alt="" style=" transform-origin: 50% 50% -600.159px; transform: rotateY(3.92699rad);">
</div>
<div slide-index="7">
    <img src="https://source.unsplash.com/bjhrzvzZeq4/800x533" alt="" style=" transform-origin: 50% 50% -600.159px; transform: rotateY(4.71239rad);">
</div>
<div slide-index="8">
    <img src="https://source.unsplash.com/7mUXaBBrhoA/800x533" alt="" style=" transform-origin: 50% 50% -600.159px; transform: rotateY(5.49779rad);">
</div>
<div slide-index="9">
    <img src="https://source.unsplash.com/7mUXaBBrhoA/800x533" alt="" style=" ">
</div>
<div slide-index="10">
    <img src="https://source.unsplash.com/7mUXaBBrhoA/800x533" alt="" style=" ">
</div>
<div slide-index="11">
    <img src="https://source.unsplash.com/7mUXaBBrhoA/800x533" alt="" style=" ">
</div>
<div slide-index="12">
    <img src="https://source.unsplash.com/7mUXaBBrhoA/800x533" alt="" style=" ">
</div>-->

<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script src="http://production-assets.codepen.io/assets/common/stopExecutionOnTimeout-b2a7b3fe212eaa732349046d8416e00a9dec26eb7fd347590fbced3ab38af52e.js"></script>

<script>'use strict';

window.addEventListener('load', function () {
    var carousels = document.querySelectorAll('.carousel');

    for (var i = 0; i < carousels.length; i++) {if (window.CP.shouldStopExecution(1)){break;}
        carousel(carousels[i]);
    }
    window.CP.exitedLoop(1);

});

function carousel(root) {

    var figure = root.querySelector('figure'),
        nav_prev = document.querySelector('.main-nav.prev'),
        nav_next = document.querySelector('.main-nav.next'),
        images = figure.children,
        n = images.length,
        //n=8,
        gap = root.dataset.gap || 0,
        bfc = 'bfc' in root.dataset,
        theta = 2 * Math.PI / n,
        currImage = 0;

    setupCarousel(n, parseFloat(getComputedStyle(images[0]).width));
    window.addEventListener('resize', function () {
        //setupCarousel(n, parseFloat(getComputedStyle(images[0]).width));
        setupCarousel(n, parseFloat(getComputedStyle(images[0]).width));
    });

    setupNavigation();

    function setupCarousel(n, s) {
        var apothem = s / (2 * Math.tan(Math.PI / n));

        figure.style.transformOrigin = '50% 50% ' + -apothem + 'px';

        for (var i = 0; i < n; i++) {if (window.CP.shouldStopExecution(2)){break;}
            images[i].style.padding = gap + 'px';
        }
        window.CP.exitedLoop(2);
        for (i = 1; i < n; i++) {if (window.CP.shouldStopExecution(3)){break;}
            images[i].style.transformOrigin = '50% 50% ' + -apothem + 'px';
            images[i].style.transform = 'rotateY(' + i * theta + 'rad)';
        }
        window.CP.exitedLoop(3);

        if (bfc) for (i = 0; i < n; i++) {if (window.CP.shouldStopExecution(4)){break;}
            images[i].style.backfaceVisibility = 'hidden';
        }
        window.CP.exitedLoop(4);
        rotateCarousel(currImage);
    }

    function setupNavigation() {
        nav_prev.addEventListener('click', onClick, true);
        nav_next.addEventListener('click', onClick, true);

        function onClick(e) {
            e.stopPropagation();

            var t = e.target;
            if (t.tagName.toUpperCase() != 'BUTTON') return;

            var $carousel = $('.carousel');
            $carousel.removeClass('go-prev');
            $carousel.removeClass('go-next');

            if (t.classList.contains('next')) {
                currImage++;
                $carousel.addClass('go-next');
                $('[slide-index]').each(function(){
                    var ind = parseInt($(this).attr('slide-index'));
                    var new_ind = (ind - 1 == 0) ? 12 : ind - 1;
                });
            } else {
                currImage--;
                $carousel.addClass('go-prev');
                $('[slide-index]').each(function(){
                    var ind = parseInt($(this).attr('slide-index'));
                    var new_ind = (ind + 1 > 12) ? 1 : ind + 1;
                });
            }

            var change_step = 100;
            var step_now = 0;
            var timerChangeSlide = setInterval(function() {
              
            



              switch (step_now){
                case 0:
                    //уменьшаем центральное изображение
                    $carousel.addClass('zoom-center');
                break;
                case 100:
                    $carousel.addClass('rotation');
                    $carousel.addClass('fives-images');
                    $carousel.addClass('six-images');
                break;
                case 1400:
                    rotateCarousel(currImage);
                break;
                case 1500:
                    $carousel.addClass('six-images');
                break;
                case 2400:
                    if (t.classList.contains('next')) {
                        $('[slide-index]').each(function(){
                            var ind = parseInt($(this).attr('slide-index'));
                            var new_ind = (ind - 1 == 0) ? 12 : ind - 1;
                            $(this).attr('slide-index', new_ind);
                        });
                    } else {
                        $('[slide-index]').each(function(){
                            var ind = parseInt($(this).attr('slide-index'));
                            var new_ind = (ind + 1 > 12) ? 1 : ind + 1;
                            $(this).attr('slide-index', new_ind);
                        });
                    }
                    $carousel.addClass('fives-images-hide');

                break;
                case 2800:
                    




                    $carousel.removeClass('fives-images');
                    $carousel.removeClass('fives-images-hide');
                    $carousel.removeClass('rotation');
                    $carousel.removeClass('zoom-center');
                    $carousel.removeClass('six-images');
                break;
                default:
                    //$('.carousel').removeClass('rotation');
              }
              step_now += change_step;
              $('title').html(step_now);

            }, change_step);

            // через 5 сек остановить повторы
            setTimeout(function() {
              clearInterval(timerChangeSlide);
              
              $('title').html('таймер остановлен'); 
            }, 3000);



/*
            $('.carousel').addClass('rotation');
            setTimeout(function(){

            if (t.classList.contains('next')) {
                currImage++;
                $('[slide-index]').each(function(){
                    var ind = parseInt($(this).attr('slide-index'));
                    var new_ind = (ind - 1 == 0) ? 12 : ind - 1;
                    $(this).attr('slide-index', new_ind);

                });
            } else {
                currImage--;
                $('[slide-index]').each(function(){
                    var ind = parseInt($(this).attr('slide-index'));
                    var new_ind = (ind + 1 > 12) ? 1 : ind + 1;
                    $(this).attr('slide-index', new_ind);

                });
            }

                rotateCarousel(currImage);
                setTimeout(function() {
                    $('.carousel').removeClass('rotation');
                }, 1200);
            }, 900);
*/


        }
    }

    function rotateCarousel(imageIndex) {
        figure.style.transform = 'rotateY(' + imageIndex * -theta + 'rad)';
    }
}
//# sourceURL=pen.js
</script>

</body>
</html>
